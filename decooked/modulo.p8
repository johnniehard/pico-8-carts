pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
x=64 y=64
px=x py=y

debug=false
x=0 y=0 spd=0.1 dirx=0 diry=0
flipx=false flipy=false
pspr=1 lastbtn=1


function _update()
	if(btn(0)) and diry==0 then dirx=-1 lastbtn=0
	elseif(btn(1)) and diry==0 then dirx=1 lastbtn=1
	else dirx=0 end
	
	if(btn(2)) and dirx==0 then diry=-1 lastbtn=2
	elseif(btn(3)) and dirx==0 then diry=1 lastbtn=3
	else	diry=0 end
	
	x+=spd*dirx
	y+=spd*diry
	if(dirx<0) then flipx=true
	elseif(dirx>0) then flipx=false
	elseif(diry<0) then flipy=false
	elseif(diry>0) then flipy=true
	end
	
	if(dirx!=0) then pspr=1
	elseif(diry!=0) then pspr=2
	end


	px=(flr(x)%16)*8
	py=(flr(y)%16)*8
end

function _draw()
	cls()
	map(0,0,0,0,16,16)

	rect(px,py,px+7,py+7,2)

	print(px,0,0,15)
	print(py,0,8,15)
	print(flr(x),0,16,15)
	print(x%16,0,24,15)
end
-- for i=0,127 do
-- 	if i%8==0 then
-- 		rectfill(i,0,i+7,7,rnd(15)+1)
-- 		spr(1,i,0)
-- 		print(i)
-- 	end
-- end
__gfx__
00000000200000092eeeeeed00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000002000090e2eeee9d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000200900ee2ee9ed00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000029000eee29eed00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000092000eee9ceed00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000900200ee9eeced00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000009000020e9eeeecd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000090000002dddddddc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
