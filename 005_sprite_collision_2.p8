pico-8 cartridge // http://www.pico-8.com
version 16
__lua__


function makeplayer()
 local p={}
 p.x=80
 p.y=9
 p.vx=1
 p.vy=1
 p.d=0 --direction
 return p
end

function updateplayer()
	--left
 if (btn(0)) then
  if(not solid(p.x-p.vx-1,p.y))then
   p.x-=p.vx
  end
 end
 
 --right
 if (btn(1)) then
  if(not solid(p.x+p.vx+8,p.y))then
   p.x+=p.vx
  end
 end
 
 --up
 if (btn(2)) then
  if(not solid(p.x,p.y-p.vy-1))then
   p.y-=p.vy
  end
 end
 
 --down
 if (btn(3)) then
  if(not solid(p.x,p.y+p.vy+8))then
   p.y+=p.vy
  end
 end
 
end

function drawplayer()
 spr(2,p.x,p.y)
end

function solid(x, y)
 local tilex = ((x - (x % 8)) / 8)	
 local tiley = ((y - (y % 8)) / 8)
 print("tilex: ".. tilex)
 print("tiley: ".. tiley)
 val=mget(tilex,tiley)
 print(val)
 print(fget(val,0))
 return fget(val,0)
end

function _init()
 p=makeplayer()
end

function _update()
 updateplayer()
end

function _draw()
	cls()
	map(0,0)
 drawplayer()
 solid(p.x,p.y)
 --print(solid(p.x,p.y))
end
__gfx__
000000000000000000000000000000000000000000000000000000000000000044444444000200006aaaaaa70000000000000000000000000000000000000000
000000000000000000999900000000000000000000000000000000000000000094999999002200001dddddda0000000000000000000000000000000000000000
007007000000000000b99b000000000000000000000000000000000000000000949999990022ee001dddddda0000000000000000000000000000000000000000
000770000000000000999900000000000000000000000000000000000000000084888888222922201dddddda0000000000000000000000000000000000000000
0007700000000000899999980000000000000000000000000000000000000000444444440222e0001dddddda0000000000000000000000000000000000000000
0070070000000000895555980000000000000000000000000000000000000000999994990002eb001dddddda0000000000000000000000000000000000000000
00000000000000008550055800000000000000000000000000000000000000009999949900020b001dddddda0000000000000000000000000000000000000000
00000000000000008880088800000000000000000000000000000000000000008888848800000b00211111160000000000000000000000000000000000000000
__gff__
0000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a000000000000000000000001000a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a000000000000000000000001000a0a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a00000000000000000000000100000a0a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a00000000000000000009000100000a0a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a00000000000000090a0a0a0a0a0a0a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a000000000000000a0a08080808080a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a000000000000010a0808080808080a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a010101010101010a080808080a0a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a000000000000000a080808080a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a0000000000000001080808080a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a0000000000090a0a0a0a0a0a0a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a0a0a0a0a0a0a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
