pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
x = 64 y = 64
particle={}
function make_particle(x,y,c)
 local p={}
 p.life=10
 p.decay=rnd()+0.1
 p.x=x
 p.y=y
 if (rnd() > 0.5) then
 	p.vx=rnd(1)
 else
 	p.vx=rnd(1)-1
 end
 if (rnd() > 0.5) then
 	p.vy=rnd(1)
 else
 	p.vy=rnd(1)-1
 end
 
 p.c=c

 add(particle,p)
 return p
end

function move_particle(p)
	p.life-=p.decay
 p.x+=p.vx
 p.y+=p.vy
 if (p.life <= 0) then
  del(particle, p)
 end
end

function draw_particle(p)
 pset(p.x,p.y,p.c)
end

function add_particles(n,x,y,c)
 for i=1,n do
  make_particle(x,y,c)
 end
end

function _init()
 print(#particle)
end


function _update()
	local s=2
	if(btn(0)) x-=s
	if(btn(1)) x+=s
	if(btn(2)) y-=s
	if(btn(3)) y+=s
 if(btn(4)) add_particles(10,x,y,flr(rnd(15))+1)
	foreach(particle, move_particle)
end

function _draw()
	cls()
 foreach(particle, draw_particle)
end

__gfx__
00000000bbbbbbbb3636336300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bb9b9bbb6633266600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000299999553333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000469996659333339300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000522333b49955299900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000002366662b9665469900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003363363633b4522300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000026666633662b236600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101020201000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020201000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
